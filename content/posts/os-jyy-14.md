---
title: "操作系统-jyy-14"
date: 2022-08-31T21:09:23+08:00
---

# 第14讲 C标准库的实现

系统调用的封装，内存空间管理

不会有人想用汇编来写操作系统吧，不会有人想直接用系统调用构建吧。
不会真的有人在oj上写题，不用printf用write系统调用吧。

对系统调用进行封装，是自然而然的想法。

## 重新认识libc

一个例子

execve的pathname是绝对路径，但是你希望使用PATH下的路径可以吗?你想不按照规定来?没门。

execlp帮助你去遍历env的PATH，挨个执行execve看看能不能找到合适的pathname。高情商api，这才是人民群众喜闻乐见的api

封装纯粹的计算，比如memset。
标准库要正确，并快。兼容很多cpu

多个线程同时memset怎么办？库函数要考虑的问题比自己写的要多得多。

标准库只对“标准库内部数据”的线程安全性负责

更多标准库需要做的：排序，查找,atoi,atol,atoll

计算就更复杂了
怎样在IEEE754这个浮点数优化计算，754在-1到1之间很密，怎么利用这个特性，怎么避免-INF精度爆炸的问题。
### 封装文件描述符





