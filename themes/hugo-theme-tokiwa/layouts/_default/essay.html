{{ define "header" }}
{{ partial "page-header.html" . }}

{{ end }}


{{ define "main" }}
{{ $section := .Site.GetPage "section" .Section }}
<article>
    <section class="mx-auto content">
        <div class="c-rich-text">
      <div class="post memos-container">
        <h2 class="post-title">{{.Title}}</h2>
<div id="memos"></div>
<div id="memo-list"></div>

<style>
/* 将 memobbs 样式限制在 .memos-container 内 */
.memos-container {
    isolation: isolate; /* CSS isolation */
}

/* 重置可能影响布局的样式 */
.memos-container * {
    box-sizing: border-box;
}

/* 强制保护布局 - 针对 baseof.html 中的布局结构 */
body > div.p-6 {
    display: flex !important;
    flex-wrap: wrap !important;
}

/* 保护 header */
body > div.p-6 > header {
    width: 40% !important;
    order: 1 !important;
}

/* 保护 main */
body > div.p-6 > main {
    width: 60% !important;
    order: 2 !important;
}

/* 保护 aside */
body > div.p-6 > aside {
    width: 40% !important;
    order: 3 !important;
    position: sticky !important;
    bottom: 0 !important;
    align-self: flex-end !important;
}

/* 保护 footer */
body > div.p-6 > footer {
    width: 60% !important;
    order: 4 !important;
}

/* 黑暗模式基础样式 */
html, body {
    background-color: #1a1a1a !important;
    color: #e5e5e5 !important;
}

.memos-container {
    background-color: #1a1a1a !important;
    color: #e5e5e5 !important;
}

/* 预设 memos 相关元素的黑暗模式样式 */
#memos, #memo-list {
    background-color: #1a1a1a !important;
    color: #e5e5e5 !important;
}
</style>

<link rel="stylesheet" href="https://cdn.staticfile.org/aplayer/1.10.1/APlayer.min.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/animate.css/4.1.1/animate.min.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/artalk/2.7.3/ArtalkLite.css">

<!-- 直接引入原始 CSS，用上面的保护性样式覆盖 -->
<link rel="stylesheet" href="https://memobbs.app/grid.css">
<link rel="stylesheet" href="https://memobbs.app/memos.css">

      <script src="https://cdn.staticfile.org/artalk/2.7.3/ArtalkLite.js"></script>
      <script src="https://cdn.staticfile.org/marked/7.0.5/marked.min.js"></script>
      <script src="https://cdn.staticfile.org/aplayer/1.10.1/APlayer.min.js"></script>
      <script>
      var meting_api='https://api.injahow.cn/meting/?server=:server&type=:type&id=:id&auth=:auth&r=:r';
      </script>
      <script src="https://cdn.staticfile.org/meting/2.0.1/Meting.min.js"></script>
      <script src="https://cdn.staticfile.org/lozad.js/1.16.0/lozad.min.js"></script>
      <script src="https://memobbs.app/memos.js"></script>
      <script type="text/javascript">
         var memosMyList = [
            {
              "creatorName" : "charon",
              "website" : "https://csapp.fun",
              "link" : "https://memos1.csapp.fun/",
              "creatorId" : "1",
             
            },
          ]
      </script>
      
      <!-- 黑暗模式控制脚本 -->
      <script type="text/javascript">
      // 页面加载时设置为黑暗模式
      document.addEventListener('DOMContentLoaded', function() {
          // 设置 localStorage 为 dark 主题，让 memos.js 的主题系统应用黑暗模式
          window.localStorage.setItem("theme", "dark");
          
          // 添加 dark 和 dark-theme 类到 body
          document.body.classList.add("dark-theme", "dark");
      });
      </script>
      </div>
      </div>
</section>

</article>
{{end}}



{{ define "aside" }}
	{{ partial "page-aside.html" . }}
{{ end }}